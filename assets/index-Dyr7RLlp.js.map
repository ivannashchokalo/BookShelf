{"version":3,"file":"index-Dyr7RLlp.js","sources":["../../src/js/books-api.js","../../src/js/constants.js","../../src/js/refs.js","../../src/js/render-function.js","../../src/js/helpers.js","../../src/js/handlers.js","../../src/js/home.js","../../src/index.js"],"sourcesContent":["import axios from \"axios\";\nconst BASE_URL = \"https://books-backend.p.goit.global\";\n\nconst server = axios.create({\n    baseURL: BASE_URL,\n})\n\nconst ENDPOINTS = {\n  allCategories: \"/books/category-list\",\n  top: \"/books/top-books\",                \n  byCategory: \"/books/category\",          \n  bookById: \"/books\",                     \n};\n\nexport async function fetchAllCategories() {\n    const response = await server.get(ENDPOINTS.allCategories);\n    return response.data;\n}\n\nexport async function fetchTopBooks() {\n    const response = await server.get(ENDPOINTS.top);\n    return response.data;\n}\n\nexport async function fetchBookByCategory(category) {\n     const response = await server.get(ENDPOINTS.byCategory, {\n        params: {\n            category,\n        }\n    });\n    return response.data;\n}\n\nexport async function fetchBookById(id) {\n    const response = await server.get(`${ENDPOINTS.bookById}/${id}`)\n    return response.data;\n}\n\n\n","export const STATE = {\n  screenType: 'mobile', // \"desktop\", \"tablet\", \"mobile\"\n};\n","export const refs = {\n  mainBookList: document.querySelector('.main-books-list'),\n  categoriesList: document.querySelector('.categories-list'),\n};\n    \n","import { refs } from './refs';\n\nexport function renderTopBooks(data, cardsLimit) {\n  const markup = [];\n  data.forEach(category => {\n    const booksMarkup = category.books\n      .slice(0, cardsLimit)\n      .map(book => renderBookListCard(book))\n      .join('');\n    markup.push(\n      `<li class=\"top-books-category\">\n      <h2 class=\"top-books-category-title\">${category.list_name}</h2>\n      <ul class=\"books-cards-list\">${booksMarkup}</ul>\n      <button type=\"button\" class=\"more-books-btn\" data-category=\"${category.list_name}\">SEE MORE</button>\n      </li>`\n    );\n  });\n  refs.mainBookList.innerHTML = markup.join('');\n}\n\nfunction renderBookListCard({ _id, book_image, title, author }) {\n  return `<li class=\"book-card\" data-id=\"${_id}\" alt=\"Book cover of ${title}\">\n  <img class=\"book-card-cover\" src=\"${book_image}\">\n  <h3 class=\"book-card-title\">${title}</h3>\n  <p class=\"book-card-author\">${author}</p>\n  </li>`;\n}\n\nexport function renderCategories(categories) {\n    const firstCategoryItem = `<li class=\"categories-list-item\">\n                <button class=\"categories-list-button current\">All categories</button>\n              </li>`\n\n    const markup = categories.map(({ list_name }) => {\n        if (list_name) {\n            return `<li class=\"categories-list-item\">\n                <button class=\"categories-list-button\">${list_name}</button>\n              </li>`\n        }\n    }).join('');\n\n    refs.categoriesList.innerHTML = firstCategoryItem+markup;\n}\n","import { fetchTopBooks } from './books-api';\nimport { renderTopBooks } from './render-function';\n\nexport function getScreenType() {\n  const width = window.innerWidth;\n  if (width >= 1440) {\n    return 'desktop';\n  } else if (width >= 768) {\n    return 'tablet';\n  } else {\n    return 'mobile';\n  }\n}\n\nexport async function getTopBooks() {\n  const cardsLimit = getResponsiveCardsLimit();\n  try {\n    const data = await fetchTopBooks();\n    renderTopBooks(data, cardsLimit);\n  } catch (err) {\n    console.error(err);\n  }\n}\n\nfunction getResponsiveCardsLimit() {\n  const screenType = getScreenType();\n  const limits = {\n    mobile: 1,\n    tablet: 3,\n    desktop: 5,\n  };\n  return limits[screenType];\n}\n","import { fetchAllCategories } from './books-api';\nimport { STATE } from './constants';\nimport { getScreenType, getTopBooks } from './helpers';\nimport { renderCategories } from './render-function';\n\nexport async function handleHomePageInit() {\n  // призначити активною \"All categories\"\n  // зчитати і застосувати тему з локального сховища\n  // за бажанням можна додати каунтер в хедер до шопінг листа. Зчитати і застосувати його з локального сховища\n  STATE.screenType = getScreenType();\n  await getTopBooks();\n  try {\n    const categories = await fetchAllCategories();\n    renderCategories(categories);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport async function handleHomeResize() {\n  const screenType = getScreenType();\n  if (screenType === STATE.screenType) {\n    return;\n  }\n  STATE.screenType = screenType;\n  // якщо категорія не \"All categories\" - return\n  await getTopBooks();\n}\n","import { handleHomePageInit, handleHomeResize } from './handlers';\n\nexport function initHome() {\n  document.addEventListener('DOMContentLoaded', handleHomePageInit);\n}\n\nwindow.addEventListener('resize', handleHomeResize);","import '../src/sass/main.scss';\n\nimport { initHome } from './js/home';\nimport { initShoppingList } from './js/shopping-list.js';\n\nconst page = document.body.dataset.page;\n\nswitch (page) {\n  case 'home':\n    initHome();\n    break;\n  case 'shopping-list':\n    initShoppingList();\n    break;\n  default:\n    console.log('Unknown page');\n}"],"names":["BASE_URL","server","axios","ENDPOINTS","fetchAllCategories","fetchTopBooks","STATE","refs","renderTopBooks","data","cardsLimit","markup","category","booksMarkup","book","renderBookListCard","_id","book_image","title","author","renderCategories","categories","firstCategoryItem","list_name","getScreenType","width","getTopBooks","getResponsiveCardsLimit","err","screenType","handleHomePageInit","error","handleHomeResize","initHome","page"],"mappings":"+uBACA,MAAMA,EAAW,sCAEXC,EAASC,EAAM,OAAO,CACxB,QAASF,CACb,CAAC,EAEKG,EAAY,CAChB,cAAe,uBACf,IAAK,mBACL,WAAY,kBACZ,SAAU,QACZ,EAEO,eAAeC,GAAqB,CAEvC,OADiB,MAAMH,EAAO,IAAIE,EAAU,aAAa,GACzC,IACpB,CAEO,eAAeE,GAAgB,CAElC,OADiB,MAAMJ,EAAO,IAAIE,EAAU,GAAG,GAC/B,IACpB,CCtBO,MAAMG,EAAQ,CACnB,WAAY,QACd,ECFaC,EAAO,CAClB,aAAc,SAAS,cAAc,kBAAkB,EACvD,eAAgB,SAAS,cAAc,kBAAkB,CAC3D,ECDO,SAASC,EAAeC,EAAMC,EAAY,CAC/C,MAAMC,EAAS,CAAA,EACfF,EAAK,QAAQG,GAAY,CACvB,MAAMC,EAAcD,EAAS,MAC1B,MAAM,EAAGF,CAAU,EACnB,IAAII,GAAQC,EAAmBD,CAAI,CAAC,EACpC,KAAK,EAAE,EACVH,EAAO,KACL;AAAA,6CACuCC,EAAS,SAAS;AAAA,qCAC1BC,CAAW;AAAA,oEACoBD,EAAS,SAAS;AAAA,YAEtF,CACA,CAAG,EACDL,EAAK,aAAa,UAAYI,EAAO,KAAK,EAAE,CAC9C,CAEA,SAASI,EAAmB,CAAE,IAAAC,EAAK,WAAAC,EAAY,MAAAC,EAAO,OAAAC,CAAM,EAAI,CAC9D,MAAO,kCAAkCH,CAAG,wBAAwBE,CAAK;AAAA,sCACrCD,CAAU;AAAA,gCAChBC,CAAK;AAAA,gCACLC,CAAM;AAAA,QAEtC,CAEO,SAASC,EAAiBC,EAAY,CACzC,MAAMC,EAAoB;AAAA;AAAA,qBAIpBX,EAASU,EAAW,IAAI,CAAC,CAAE,UAAAE,CAAS,IAAO,CAC7C,GAAIA,EACA,MAAO;AAAA,yDACsCA,CAAS;AAAA,oBAGlE,CAAK,EAAE,KAAK,EAAE,EAEVhB,EAAK,eAAe,UAAYe,EAAkBX,CACtD,CCvCO,SAASa,GAAgB,CAC9B,MAAMC,EAAQ,OAAO,WACrB,OAAIA,GAAS,KACJ,UACEA,GAAS,IACX,SAEA,QAEX,CAEO,eAAeC,GAAc,CAClC,MAAMhB,EAAaiB,IACnB,GAAI,CACF,MAAMlB,EAAO,MAAMJ,IACnBG,EAAeC,EAAMC,CAAU,CAChC,OAAQkB,EAAK,CACZ,QAAQ,MAAMA,CAAG,CAClB,CACH,CAEA,SAASD,GAA0B,CACjC,MAAME,EAAaL,IAMnB,MALe,CACb,OAAQ,EACR,OAAQ,EACR,QAAS,CACb,EACgBK,CAAU,CAC1B,CC3BO,eAAeC,GAAqB,CAIzCxB,EAAM,WAAakB,IACnB,MAAME,EAAW,EACjB,GAAI,CACF,MAAML,EAAa,MAAMjB,IACzBgB,EAAiBC,CAAU,CAC5B,OAAQU,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CAEO,eAAeC,GAAmB,CACvC,MAAMH,EAAaL,IACfK,IAAevB,EAAM,aAGzBA,EAAM,WAAauB,EAEnB,MAAMH,EAAW,EACnB,CCzBO,SAASO,GAAW,CACzB,SAAS,iBAAiB,mBAAoBH,CAAkB,CAClE,CAEA,OAAO,iBAAiB,SAAUE,CAAgB,ECDlD,MAAME,EAAO,SAAS,KAAK,QAAQ,KAEnC,OAAQA,EAAI,CACV,IAAK,OACHD,IACA,MACF,IAAK,gBAEH,MACF,QACE,QAAQ,IAAI,cAAc,CAC9B"}